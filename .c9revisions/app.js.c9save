{"ts":1358535401125,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\nvar express = require('express')\n//  , routes = require('./routes')\n  , http = require('http')\n  , path = require('path')\n  , twitter = require('ntwitter')\n  , moment = require('moment')\n  , config = require('./config');\n;\n  var app = express();\n\nvar NUMBER_OF_SERIES = 2;\n\napp.configure(function(){\n  app.set('port', process.env.PORT || 3000);\n  app.set('views', __dirname + '/views');\n  app.set('view engine', 'ejs');\n  app.use(express.favicon());\n  app.use(express.logger('dev'));\n  app.use(express.bodyParser());\n  app.use(express.methodOverride());\n  app.use(app.router);\n  app.use(require('stylus').middleware(__dirname + '/public'));\n  app.use(express.static(path.join(__dirname, 'public')));\n});\n\napp.configure('development', function(){\n  app.use(express.errorHandler());\n});\n\napp.get('/', function(req,res) {\n /*   var formattedData = [];\n    formattedData = graphData;\n    for(var i =0;i<formattedData.length;i++) {\n        formattedData[i].timestamp = formattedData[i].timestamp*60;\n    }*/\n    res.render('index', {graphData:graphData}); \n});\n\nhttp.createServer(app).listen(app.get('port'), function(){\n  console.log(\"Express server listening on port \" + app.get('port'));\n});\n\nvar t = new twitter({\n\tconsumer_key: config.consumer_key,\n\tconsumer_secret: config.consumer_secret,\n\taccess_token_key: config.access_token_key,\n\taccess_token_secret: config.access_token_secret\n});\n\nt.stream('statuses/filter', {'track':'inauguration'}, function(stream) {\n    stream.on('data', function (data) { //tweet=data.text\n        tweets[0].push({timestamp: Math.round(new Date().getTime()/1000/60), tweet: data.text});\n        \n    });\n    stream.on('error', function(error, code) {\n        console.log(\"My error: \" + error + \": \" + code);\n    });\n});\nt.stream('statuses/filter', {'track':'obama'}, function(stream) {\n    stream.on('data', function (data) { //tweet=data.text\n        tweets[1].push({timestamp: Math.round(new Date().getTime()/1000/60), tweet: data.text});\n        \n    });\n    stream.on('error', function(error, code) {\n        console.log(\"My error: \" + error + \": \" + code);\n    });\n});\nvar tweets = [];\nvar graphData = [];\nfor (var i=0;i<NUMBER_OF_SERIES;i++) {\n    graphData[i] = [];//[{timestamp, count},{timestamp, count},...]\n    tweets[i] = [];\n}\n\nsetInterval(function() {\n    graphData.forEach(function(point, series) {\n        for (var i=0;i<tweets[series].length;i++) {\n                var found = 0;\n                point.forEach(function(data) {\n                    if (data.timestamp == tweets[series][i].timestamp) {\n                        data.count++;\n                        found = 1;\n                        console.log('existing match for the same minute! total is ' + data.count);\n                    }\n                });\n                if (found === 0) {\n                    point.push({timestamp: tweets[series][i].timestamp, count: 1});\n                }\n        }\n        console.log(tweets[series].length + ' tweets added');\n        tweets[series] = [];\n    });\n    console.log(graphData)\n},2000);\n\n"]],"start1":0,"start2":0,"length1":0,"length2":3045}]],"length":3045}
{"contributors":[],"silentsave":false,"ts":1358542705500,"patch":[[{"diffs":[[0,"s')\n"],[-1,"//  , routes = require('./routes')\n"],[0,"  , "]],"start1":30,"start2":30,"length1":43,"length2":8},{"diffs":[[0,"r')\n"],[-1,"  , moment = require('moment')\n"],[0,"  , "]],"start1":118,"start2":118,"length1":39,"length2":8},{"diffs":[[0,"nfig');\n"],[-1,";\n"],[0,"  var ap"]],"start1":148,"start2":148,"length1":18,"length2":16}]],"length":2977,"saved":false}
{"ts":1358542775849,"patch":[[{"diffs":[[0,"tweet=data.text\n"],[1,"        console.log(data.text);\n"],[0,"        tweets[0"]],"start1":1437,"start2":1437,"length1":32,"length2":64},{"diffs":[[0,"t: data.text});\n"],[-1,""],[0,"        \n    });"]],"start1":1566,"start2":1566,"length1":32,"length2":32},{"diffs":[[0,"tweet=data.text\n"],[1,"        console.log(data.text);\n"],[0,"        tweets[1"]],"start1":1823,"start2":1823,"length1":32,"length2":64},{"diffs":[[0,"            "],[1,"//"],[0,"       conso"]],"start1":2622,"start2":2622,"length1":24,"length2":26},{"diffs":[[0,"     }\n     "],[1,"//"],[0,"   console.l"]],"start1":2900,"start2":2900,"length1":24,"length2":26},{"diffs":[[0,"    });\n"],[-1,""],[0," "],[1,"//"],[0,"   conso"]],"start1":3000,"start2":3000,"length1":17,"length2":19}]],"length":3047,"saved":false}
{"ts":1358542826317,"patch":[[{"diffs":[[0,"    console.log("],[1,"\"0\"+"],[0,"data.text);\n    "]],"start1":1457,"start2":1457,"length1":32,"length2":36},{"diffs":[[0,"ole.log("],[1,"\"1\"+"],[0,"data.tex"]],"start1":1855,"start2":1855,"length1":16,"length2":20}]],"length":3055,"saved":false}
{"ts":1358542881886,"patch":[[{"diffs":[[0,"k':'"],[-1,"inauguration"],[1,"obama"],[0,"'}, "]],"start1":1356,"start2":1356,"length1":20,"length2":13},{"diffs":[[0,"ter', {'track':'"],[-1,"obama"],[1,"inauguration"],[0,"'}, function(str"]],"start1":1734,"start2":1734,"length1":37,"length2":44}]],"length":3055,"saved":false}
{"ts":1358543085375,"patch":[[{"diffs":[[0,"et\n});\n\n"],[1,"/*"],[0,"t.stream"]],"start1":1314,"start2":1314,"length1":16,"length2":18},{"diffs":[[0," });\n});"],[1,"*/"],[0,"\nt.strea"]],"start1":1705,"start2":1705,"length1":16,"length2":18}]],"length":3059,"saved":false}
{"ts":1358543230786,"patch":[[{"diffs":[[0,"et\n});\n\n"],[-1,"/*"],[0,"t.stream"]],"start1":1314,"start2":1314,"length1":18,"length2":16},{"diffs":[[0,"ction(stream) {\n"],[1,""],[0,"    stream.on('d"]],"start1":1372,"start2":1372,"length1":32,"length2":32},{"diffs":[[0,"e.log(\"0"],[1,":"],[0,"\"+data.t"]],"start1":1460,"start2":1460,"length1":16,"length2":17},{"diffs":[[0," });\n});"],[-1,"*/"],[0,"\nt.strea"]],"start1":1704,"start2":1704,"length1":18,"length2":16},{"diffs":[[0,"tweet=data.text\n"],[-1,""],[0,"        console."]],"start1":1828,"start2":1828,"length1":32,"length2":32},{"diffs":[[0,"e.log(\"1"],[1,":"],[0,"\"+data.t"]],"start1":1858,"start2":1858,"length1":16,"length2":17}]],"length":3057,"saved":false}
{"ts":1358543330033,"patch":[[{"diffs":[[0,"e);\n    });\n"],[1,"     stream.on('destroy', function (response) {\n         console.log(\"My destroy error: \" + response);\n    // Handle a 'silent' disconnection from Twitter, no end/error event fired\n    });\n"],[0,"});\nvar twee"]],"start1":2095,"start2":2095,"length1":24,"length2":213}]],"length":3246,"saved":false}
{"ts":1358543909025,"patch":[[{"diffs":[[0,"ata.text});\n"],[-1,"        \n"],[0,"    });\n    "]],"start1":1568,"start2":1568,"length1":33,"length2":24}]],"length":3237,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358546822496,"patch":[[{"diffs":[[0,"});\n"],[-1,"t.stream('statuses/filter', {'track':'inauguration'}, function(stream) {\n    stream.on('data', function (data) { //tweet=data.text\n        console.log(\"1:\"+data.text);\n        tweets[1].push({timestamp: Math.round(new Date().getTime()/1000/60), tweet: data.text});\n        \n    });\n    stream.on('error', function(error, code) {\n        console.log(\"My error: \" + error + \": \" + code);\n    });\n     stream.on('destroy', function (response) {\n         console.log(\"My destroy error: \" + response);\n    // Handle a 'silent' disconnection from Twitter, no end/error event fired\n    });\n});\nvar tweets = [];\nvar graphData = [];\nfor (var i=0;i<NUMBER_OF_SERIES;i++) {\n    graphData[i] = [];//[{timestamp, count},{timestamp, count},...]"],[1,"\nvar tweets = [];\nvar graphData = [];//[{timestamp, count},{timestamp, count},...]\nfor (var i=0;i<NUMBER_OF_SERIES;i++) {"],[0,"\n   "]],"start1":1700,"start2":1700,"length1":738,"length2":129}]],"length":2628,"saved":false}
{"ts":1358546927175,"patch":[[{"diffs":[[0," {\n "],[-1,"/*   var formattedData = [];\n    formattedData = graphData;\n    for(var i =0;i<formattedData.length;i++) {\n        formattedData[i].timestamp = formattedData[i].timestamp*60;\n    }*/\n "],[0,""],[1,""],[0,"   r"]],"start1":749,"start2":749,"length1":192,"length2":8},{"diffs":[[0,"..]\n"],[-1,"for (var i=0;i<NUMBER_OF_SERIES;i++) {\n    tweets[i] = [];\n}\n\nsetInterval(function() {\n    graphData.forEach(function(point, series"],[1,"\nsetInterval(function("],[0,") {\n"]],"start1":1599,"start2":1599,"length1":139,"length2":30},{"diffs":[[0,"i=0;i<tweets"],[-1,"[series]"],[0,".length;i++)"]],"start1":1646,"start2":1646,"length1":32,"length2":24},{"diffs":[[0,"        "],[-1,"point"],[1,"graphData"],[0,".forEach"]],"start1":1712,"start2":1712,"length1":21,"length2":25},{"diffs":[[0,"p == tweets["],[-1,"series]["],[0,"i].timestamp"]],"start1":1792,"start2":1792,"length1":32,"length2":24},{"diffs":[[0,"    "],[-1,"point"],[1,"graphData"],[0,".pus"]],"start1":2087,"start2":2087,"length1":13,"length2":17},{"diffs":[[0,"ets["],[-1,"series]["],[0,"i].t"]],"start1":2121,"start2":2121,"length1":16,"length2":8},{"diffs":[[0,"eets"],[-1,"[series] = [];\n    })"],[1," = []"],[0,";\n /"]],"start1":2253,"start2":2253,"length1":29,"length2":13}]],"length":2303,"saved":false}
{"ts":1358546933311,"patch":[[{"diffs":[[0," 1;\n"],[-1,"                 //       console.log('existing match for the same minute! total is ' + data.count);\n"],[0,"    "]],"start1":1889,"start2":1889,"length1":109,"length2":8}]],"length":2202,"saved":false}
{"ts":1358547111671,"patch":[[{"diffs":[[0,"eets"],[-1,"[0]"],[0,".pus"]],"start1":1309,"start2":1309,"length1":11,"length2":8}]],"length":2199,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358547257110,"patch":[[{"diffs":[[0,"':'obama"],[1,", inauguration"],[0,"'}, func"]],"start1":1173,"start2":1173,"length1":16,"length2":30}]],"length":2213,"saved":false}
